# Bytepace Architecture

### VIP + ROUTER

- Каждый модуль имеет следующие файлы:
    - **Fabric** - используется для создания модуля, сюда прокидываются данные, который мы будет передавать на следующий экран
        ```
        Например, при переходе на экран профиля, передаем id в этот слой, как параметр
        ```
    - **Interactor** - используется для работы с сервисами, вся логика с загрузкой, обновлением данных происходит через данный слой
        ```
        Например, при работе с Realm, чтобы не работать с RealmObject желательно использовать мапперы, этот модуль будет работать и с RealmObject и с конвертированными объектами, но отдавать будет только конвертированные объекты
        ```
    - **Presenter** - используется для биндинга данных ко view. Для работы с View используем протокол. Данный биндинг происходит через протокол ***IsPresenter***, со следующими полями:
        ```
            protocol IsPresenter {
                struct Input
                struct Output
                func buildOutput(with input: Input) -> Output
            }
        ```
        ***
        В input складываем какие-действия, которые будут обрабатываться. В output складываем Driver элементы, которые мы будем биндить уже к UI
    - **View** - используется для создания экрана, имеет доступ только к ***протоколу презентера***. В данном объекте будут храниться UI элементы и биндинги
    - **ViewController** - используется для хранения view
    - **Router** - слой, для навигации по приложению, для навигации используется [RxFlow](https://github.com/RxSwiftCommunity/RxFlow). О навигации знает ***презентер этого модуля***
---
### Структура
Структура представлена на изображении ниже:
![](https://miro.medium.com/max/2862/1*-Mfew6qvLQ-t-DSOkY23Aw.png)
1. View общается с Presenter через протокол
2. Presenter может давать следующий навигационный шаг роутеру и просить данные из interactor, выдавать UI bindings во View
3. Interactor общается с сервисами/базой данных

--- 
### UI

Для создания UI используется [Framezilla](https://github.com/Otbivnoe/Framezilla). 
***Отсутствует поддержка сторибордов и .xib файлов***

---
### Assets

Для работы с ассетами используется [R.swift](https://github.com/mac-cain13/R.swift)
При работе с цветами из ассетов, стоит написать wrapper, т.к возвращаются UIColor типа optional
---
### Networking

Для работы с сетевым слоем используется [Moya](https://github.com/Moya/Moya)

---
### Database

Для работы со слоем хранения используется [Realm](https://realm.io/docs/swift/latest)